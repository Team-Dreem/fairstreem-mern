(this["webpackJsonpmern-client"]=this["webpackJsonpmern-client"]||[]).push([[0],{134:function(e,t,n){},173:function(e,t,n){},177:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),c=n.n(a),s=n(48),i=n.n(s),o=(n(134),n(21)),l=n(16),j=n(26),u=n(120),d=n(11),b=n(109),h=n.n(b),O=n(13),p=n(20),g=n(17),m=n.n(g);function x(){var e=Object(p.a)(["\n  query Search($term: String!) {\n    search(term: $term) {\n      artistName,\n      avatar,\n      _id,\n      genre\n    }\n  }\n"]);return x=function(){return e},e}function f(){var e=Object(p.a)(["\n  query GetArtistsByGenre($genre: String) {\n    artistsByGenre(genre: $genre) {\n      artistName,\n      avatar,\n      _id,\n      genre\n    }\n  }\n"]);return f=function(){return e},e}function v(){var e=Object(p.a)(["\n  query artists {\n    artists {\n      _id\n      avatar\n      artistName\n      email\n      password\n      genre\n      bio\n      website\n      socialMedia\n      songs {\n        _id\n        title\n      }\n      followers {\n        _id\n        username\n      }\n    }\n  }\n"]);return v=function(){return e},e}function y(){var e=Object(p.a)(["\n{\n  user {\n    avatar\n    username\n    firstName\n    lastName\n    orders {\n      _id\n      purchaseDate\n      songs {\n        _id\n        title\n        artist\n        description\n        price\n        image\n      }\n    }\n  }\n}\n"]);return y=function(){return e},e}function w(){var e=Object(p.a)(["\n  query getCheckout($songs: [ID]!) {\n    checkout(songs: $songs) {\n      session\n    }\n  }\n"]);return w=function(){return e},e}function N(){var e=Object(p.a)(["\n{\n  genres {\n    _id\n    name\n  }\n}\n"]);return N=function(){return e},e}function _(){var e=Object(p.a)(["\n  {\n    songs {\n      _id\n      title\n      description\n      price\n      song_url\n      genre {\n        name\n      }\n      tags \n      song_url\n    }\n  }\n"]);return _=function(){return e},e}function k(){var e=Object(p.a)(["\n  query songs {\n    songs {\n      _id\n      title\n      artistId\n      artistName\n      album\n      description\n      image\n      price\n      genre {\n        _id\n      }\n      tags\n      song_url\n    }\n  }\n"]);return k=function(){return e},e}function S(){var e=Object(p.a)(["\n  query getSongs($genre: ID) {\n    songs(genre: $genre) {\n      _id\n      title\n      artistId\n      artistName\n      album\n      description\n      image\n      price\n      genre {\n        _id\n      }\n      tags\n      song_url\n    }\n  }\n"]);return S=function(){return e},e}function T(){var e=Object(p.a)(["\n  {\n    me {\n      _id\n      avatar\n      username\n      firstName\n      lastName\n      email\n      followCount\n      follows {\n        _id\n        username\n      }\n      orders {\n        songs {\n          _id\n        }\n      }\n    }\n  }\n"]);return T=function(){return e},e}m()(T()),m()(S());var E=m()(k()),C=(m()(_()),m()(N())),A=m()(w()),I=m()(y()),$=m()(v()),R=m()(f()),D=m()(x()),U=n(207),P=n(200),F=n(201),G=n(202),L=n(204),B=n(203),M=n(205),Q=Object(P.a)({root:{maxWidth:345,height:"100%"},media:{height:140}});var W=function(e){var t=e.data,n=Q();return Object(r.jsx)(F.a,{className:n.root,children:Object(r.jsxs)(G.a,{children:[Object(r.jsx)(B.a,{className:n.media,image:t.avatar}),Object(r.jsx)(L.a,{children:Object(r.jsx)(M.a,{className:"artist-name",gutterBottom:!0,variant:"h5",component:"h2",children:t.artistName})})]})})},q=n(206),H=n(7),Y=n(121),z=n(38),J="UPDATE_GENRES",V="UPDATE_ARTISTS",K="UPDATE_SONGS",X="UPDATE_CURRENT_ARTIST",Z="UPDATE_CURRENT_SONG",ee="UPDATE_SEARCH_TERM",te="UPDATE_SEARCH_LOADING",ne="UPDATE_SEARCH_RESULTS",re="UPDATE_SEARCH_GENRE",ae="ADD_TO_CART",ce="ADD_MULTIPLE_TO_CART",se="REMOVE_FROM_CART",ie="UPDATE_CART_QUANTITY",oe="TOGGLE_CART",le=function(e,t){switch(t.type){case V:return Object(H.a)(Object(H.a)({},e),{},{artists:Object(z.a)(t.artists)});case K:return Object(H.a)(Object(H.a)({},e),{},{songs:Object(z.a)(t.songs)});case J:return Object(H.a)(Object(H.a)({},e),{},{genres:Object(z.a)(t.genres)});case"UPDATE_CURRENT_GENRE":return Object(H.a)(Object(H.a)({},e),{},{currentGenre:t.currentGenre});case X:return Object(H.a)(Object(H.a)({},e),{},{currentArtist:Object(H.a)({},t.currentArtist)});case"UPDATE_CURRENT_USER":return Object(H.a)(Object(H.a)({},e),{},{currentUser:Object(H.a)({},t.currentUser)});case Z:return Object(H.a)(Object(H.a)({},e),{},{currentSong:Object(H.a)({},t.currentSong)});case ae:return Object(H.a)(Object(H.a)({},e),{},{cartOpen:!0,cart:[].concat(Object(z.a)(e.cart),[t.song])});case ce:return Object(H.a)(Object(H.a)({},e),{},{cart:[].concat(Object(z.a)(e.cart),Object(z.a)(t.songs))});case se:var n=e.cart.filter((function(e){return e._id!==t._id}));return Object(H.a)(Object(H.a)({},e),{},{cartOpen:n.length>0,cart:n});case ie:return Object(H.a)(Object(H.a)({},e),{},{cartOpen:!0,cart:e.cart.map((function(e){return t._id===e._id&&(e.purchaseQuantity=t.purchaseQuantity),e}))});case"CLEAR_CART":return Object(H.a)(Object(H.a)({},e),{},{cartOpen:!1,cart:[]});case oe:return Object(H.a)(Object(H.a)({},e),{},{cartOpen:!e.cartOpen});case ee:return Object(H.a)(Object(H.a)({},e),{},{searchTerm:t.searchTerm,searchGenre:null});case te:return Object(H.a)(Object(H.a)({},e),{},{loading:t.loading});case re:return Object(H.a)(Object(H.a)({},e),{},{searchTerm:"",searchGenre:t.genre});case ne:return Object(H.a)(Object(H.a)({},e),{},{loading:!1,searchResults:t.results});default:return e}};var je=Object(a.createContext)(),ue=je.Provider,de=function(e){e.value;var t,n=Object(Y.a)(e,["value"]),c=(t={genres:[],artists:[],songs:[],cart:[],cartOpen:!1,currentGenre:{},currentArtist:{},currentUser:{},currentSong:{},loading:!1,searchGenre:null,searchResults:null,searchTerm:""},Object(a.useReducer)(le,t)),s=Object(d.a)(c,2),i=s[0],o=s[1];return Object(r.jsx)(ue,Object(H.a)({value:[i,o]},n))},be=function(){return Object(a.useContext)(je)},he=Object(P.a)((function(e){return{root:{flexGrow:1}}}));var Oe=function(){var e=he(),t=be(),n=Object(d.a)(t,1)[0],a=n.loading,c=n.searchResults;return a?Object(r.jsx)(q.a,{className:"loader"}):c?c.length?Object(r.jsx)("div",{className:e.root+" grid",children:Object(r.jsx)(U.a,{container:!0,spacing:2,children:c.map((function(e){return Object(r.jsx)(U.a,{item:!0,sm:3,children:Object(r.jsx)(W,{data:e})},e._id)}))})}):Object(r.jsx)("p",{className:"no-result",children:"No results found."}):null};function pe(e,t,n){return new Promise((function(r,a){var c,s,i,o=window.indexedDB.open("fairstreem",1);o.onupgradeneeded=function(e){var t=o.result;t.createObjectStore("songs",{keyPath:"_id"}),t.createObjectStore("genres",{keyPath:"_id"}),t.createObjectStore("cart",{keyPath:"_id"}),t.createObjectStore("artists",{keyPath:"_id"})},o.onerror=function(e){console.log("There was an error")},o.onsuccess=function(a){switch(c=o.result,s=c.transaction(e,"readwrite"),i=s.objectStore(e),c.onerror=function(e){console.log("error",e)},t){case"put":i.put(n),r(n);break;case"get":var l=i.getAll();l.onsuccess=function(){r(l.result)};break;case"delete":i.delete(n._id);break;default:console.log("No valid method")}s.oncomplete=function(){c.close()}}}))}var ge=n(208),me=n(184);var xe=function(){var e=be(),t=Object(d.a)(e,2),n=t[0],c=t[1],s=n.genres,i=n.searchGenre,o=Object(O.d)(C),l=o.loading,j=o.data;return Object(a.useEffect)((function(){j?(c({type:J,genres:j.genres}),j.genres.forEach((function(e){pe("genres","put",e)}))):l||pe("genres","get").then((function(e){c({type:J,genres:e})}))}),[j,l,c]),Object(r.jsx)("div",{className:"genre-menu",children:Object(r.jsx)(ge.a,{variant:"text","aria-label":"text primary button group",children:s.map((function(e){return Object(r.jsx)(me.a,{className:e.name===i?"selected":null,onClick:function(){var t;t=e.name,c({type:re,genre:t})},children:e.name},e._id)}))})})};var fe=function(){var e,t=Object(O.a)(),n=be(),c=Object(d.a)(n,2),s=c[0],i=c[1],o=s.searchGenre,l=s.searchTerm,j=function(t){clearTimeout(e),t?e=setTimeout((function(){i({type:ee,searchTerm:t})}),150):i({type:ee,searchTerm:""})};return Object(a.useEffect)((function(){var e,n;if(o)e=R,n={genre:o};else{if(!l)return void i({type:ne,results:null});e=D,n={term:l}}i({type:te,loading:!0}),t.query({query:e,variables:n}).then((function(t){var n;n=e===R?t.data.artistsByGenre:t.data.search,i({type:ne,results:n})}))}),[o,l]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"search-bar",children:Object(r.jsx)(h.a,{value:l,onChange:j,onCancelSearch:function(){return j(null)}})}),Object(r.jsx)(xe,{}),Object(r.jsx)(Oe,{})]})},ve=function(){return Object(r.jsx)("div",{className:"home-page",children:Object(r.jsxs)("div",{className:"hero",children:[Object(r.jsx)("h1",{children:"Listen | Connect | Support"}),Object(r.jsx)("h3",{children:"Listen to new music while directly supporting the artists who create it"}),Object(r.jsx)(fe,{})]})})},ye=n.p+"static/media/spinner.689d9a07.gif",we=n(18),Ne=n.n(we),_e=n(29),ke=function(e){var t=e.item,n=be(),a=Object(d.a)(n,2)[1];return Object(r.jsxs)("div",{className:"flex-row",children:[Object(r.jsx)("div",{children:Object(r.jsx)("img",{src:"/images/".concat(t.image),alt:""})}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{children:[t.title,", $",t.price]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("input",{type:"number",placeholder:"1",value:t.purchaseQuantity,onChange:function(e){var n=e.target.value;"0"===n?(a({type:se,_id:t._id}),pe("cart","delete",Object(H.a)({},t))):(a({type:ie,_id:t._id,purchaseQuantity:parseInt(n)}),pe("cart","put",Object(H.a)(Object(H.a)({},t),{},{purchaseQuantity:parseInt(n)})))}}),Object(r.jsx)("span",{role:"img","aria-label":"trash",onClick:function(){return function(e){a({type:se,_id:e._id}),pe("cart","delete",Object(H.a)({},e))}(t)},children:"\ud83d\uddd1\ufe0f"})]})]})]})},Se=n(117),Te=n(118),Ee=n(87),Ce=n.n(Ee),Ae=new(function(){function e(){Object(Se.a)(this,e)}return Object(Te.a)(e,[{key:"getProfile",value:function(){return Ce()(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return Ce()(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),Ie=(n(173),n(119)),$e=Object(Ie.a)("pk_test_TYooMQauvdEDq54NiTphI7jx"),Re=function(){var e=be(),t=Object(d.a)(e,2),n=t[0],c=t[1],s=Object(O.b)(A),i=Object(d.a)(s,2),o=i[0],l=i[1].data;function j(){c({type:oe})}if(Object(a.useEffect)((function(){function e(){return(e=Object(_e.a)(Ne.a.mark((function e(){var t;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe("cart","get");case 2:t=e.sent,c({type:ce,songs:Object(z.a)(t)});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n.cart.length||function(){e.apply(this,arguments)}()}),[n.cart.length,c]),Object(a.useEffect)((function(){l&&$e.then((function(e){e.redirectToCheckout({sessionId:l.checkout.session})}))}),[l]),!n.cartOpen)return Object(r.jsx)("div",{className:"cart-closed",onClick:j,children:Object(r.jsx)("span",{role:"img","aria-label":"trash",children:"\ud83d\uded2"})});return Object(r.jsxs)("div",{className:"cart",children:[Object(r.jsx)("div",{className:"close",onClick:j,children:"[close]"}),Object(r.jsx)("h2",{children:"Shopping Cart"}),n.cart.length?Object(r.jsxs)("div",{children:[n.cart.map((function(e){return Object(r.jsx)(ke,{item:e},e._id)})),Object(r.jsxs)("div",{className:"flex-row space-between",children:[Object(r.jsxs)("strong",{children:["Total: $",function(){var e=0;return n.cart.forEach((function(t){e+=t.price*t.purchaseQuantity})),e.toFixed(2)}()]}),Ae.loggedIn()?Object(r.jsx)("button",{onClick:function(){var e=[];n.cart.forEach((function(t){for(var n=0;n<t.purchaseQuantity;n++)e.push(t._id);o({variables:{songs:e}})})),o({variables:{songs:e}})},children:"Checkout"}):Object(r.jsx)("span",{children:"(log in to check out)"})]})]}):Object(r.jsxs)("h3",{children:[Object(r.jsx)("span",{role:"img","aria-label":"shocked",children:"\ud83d\ude31"}),"You haven't added anything to your cart yet!"]})]})};var De=function(){var e=be(),t=Object(d.a)(e,2),n=t[0],c=t[1],s=Object(l.f)().id,i=Object(a.useState)({}),j=Object(d.a)(i,2),u=j[0],b=j[1],h=Object(O.d)(E),p=h.loading,g=h.data,m=n.songs,x=n.cart;return Object(a.useEffect)((function(){m.length?b(m.find((function(e){return e._id===s}))):g?(c({type:K,songs:g.songs}),g.songs.forEach((function(e){pe("songs","put",e)}))):p||pe("songs","get").then((function(e){c({type:K,songs:e})}))}),[m,g,p,c,s]),Object(r.jsxs)(r.Fragment,{children:[u?Object(r.jsxs)("div",{className:"container my-1",children:[Object(r.jsx)(o.b,{to:"/",children:"\u2190 Back to Songs"}),Object(r.jsx)("h2",{children:u.title}),Object(r.jsx)("p",{children:u.description}),Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:"Price:"}),"$",u.price," ",Object(r.jsx)("button",{onClick:function(){var e=x.find((function(e){return e._id===s}));e?(c({type:ie,_id:s,purchaseQuantity:parseInt(e.purchaseQuantity)+1}),pe("cart","put",Object(H.a)(Object(H.a)({},e),{},{purchaseQuantity:parseInt(e.purchaseQuantity)+1}))):(c({type:ae,song:Object(H.a)(Object(H.a)({},u),{},{purchaseQuantity:1})}),pe("cart","put",Object(H.a)(Object(H.a)({},u),{},{purchaseQuantity:1})))},children:"Add to cart"}),Object(r.jsx)("button",{disabled:!x.find((function(e){return e._id===u._id})),onClick:function(){c({type:se,_id:u._id}),pe("cart","delete",Object(H.a)({},u))},children:"Remove from Cart"})]}),Object(r.jsx)("audio",{className:"audio",controls:!0,children:Object(r.jsx)("source",{src:"".concat(u.song_url),type:"audio/mpeg"})}),Object(r.jsx)("img",{src:"/images/".concat(u.image),alt:u.title})]}):null,p?Object(r.jsx)("img",{src:ye,alt:"loading"}):null,Object(r.jsx)(Re,{})]})};var Ue=function(e){var t=e.children;return Object(r.jsx)("div",{style:{height:560,clear:"both",paddingTop:120,textAlign:"center"},children:t})},Pe=function(){return Object(r.jsx)("div",{children:Object(r.jsxs)(Ue,{children:[Object(r.jsx)("h1",{children:"404 Page Not Found"}),Object(r.jsx)("h1",{children:Object(r.jsx)("span",{role:"img","aria-label":"Face With Rolling Eyes Emoji",children:"\ud83d\ude44"})})]})})},Fe=n(49);function Ge(){var e=Object(p.a)(["\nmutation addFollower($userId: ID!){\n  addFollower(userId: $userId) {\n    follows{\n      artistName\n      _id\n    }\n  }\n}\n"]);return Ge=function(){return e},e}function Le(){var e=Object(p.a)(["\nmutation addFollow($artistId:ID!) {\n  addFollow(artistId: $artistId) {\n    followers{\n      username\n      _id\n    }\n  }\n}\n"]);return Le=function(){return e},e}function Be(){var e=Object(p.a)(["\n  mutation addArtist($artistName: String!, $email: String!, $password: String!, $genre: String!, $bio: String, $socialMedia: String, $avatar: String) {\n    addArtist(artistName: $artistName, email: $email, password: $password, genre: $genre, bio: $bio, socialMedia: $socialMedia, avatar: $avatar) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"]);return Be=function(){return e},e}function Me(){var e=Object(p.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!, $bio: String, $avatar: String) {\n    addUser(username: $username, email: $email, password: $password, bio: $bio, avatar: $avatar) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"]);return Me=function(){return e},e}function Qe(){var e=Object(p.a)(["\n  mutation addOrder($songs: [ID]!) {\n    addOrder(songs: $songs) {\n      purchaseDate\n      songs {\n        _id\n        title\n        description\n        price\n        genre {\n          name\n        } \n      }\n    }\n  }\n"]);return Qe=function(){return e},e}function We(){var e=Object(p.a)(["\n  mutation artistLogin($email: String!, $password: String!) {\n    artistLogin(email: $email, password: $password) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"]);return We=function(){return e},e}function qe(){var e=Object(p.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"]);return qe=function(){return e},e}var He=m()(qe()),Ye=m()(We()),ze=m()(Qe()),Je=m()(Me()),Ve=m()(Be()),Ke=m()(Le()),Xe=m()(Ge());var Ze=function(e){var t=Object(a.useState)({email:"",password:"",accountType:""}),n=Object(d.a)(t,2),c=n[0],s=n[1],i=Object(O.c)(He),l=Object(d.a)(i,2),j=l[0],u=l[1].error,b=Object(O.c)(Ye),h=Object(d.a)(b,1)[0],p=function(){var e=Object(_e.a)(Ne.a.mark((function e(t){var n,r,a,s;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,"user"!==c.acctType){e.next=10;break}return e.next=5,j({variables:{email:c.email,password:c.password}});case 5:n=e.sent,r=n.data.login.token,Ae.login(r),e.next=16;break;case 10:if("artist"!==c.acctType){e.next=16;break}return e.next=13,h({variables:{email:c.email,password:c.password}});case 13:a=e.sent,s=a.data.artistLogin.token,Ae.login(s);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),g=function(e){var t=e.target,n=t.name,r=t.value;s(Object(H.a)(Object(H.a)({},c),{},Object(Fe.a)({},n,r)))};return Object(r.jsxs)("div",{className:"container my-1",children:[Object(r.jsx)(o.b,{to:"/signup",children:"\u2190 Go to Signup"}),Object(r.jsx)("h2",{children:"Login"}),Object(r.jsxs)("form",{onSubmit:p,children:[Object(r.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(r.jsx)("label",{htmlFor:"type",children:"Account Type:"}),Object(r.jsx)("input",{placeholder:"user or artist",name:"acctType",type:"acctType",id:"type",onChange:g})]}),Object(r.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(r.jsx)("label",{htmlFor:"email",children:"Email address:"}),Object(r.jsx)("input",{placeholder:"youremail@test.com",name:"email",type:"email",id:"email",onChange:g})]}),Object(r.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(r.jsx)("label",{htmlFor:"pwd",children:"Password:"}),Object(r.jsx)("input",{placeholder:"******",name:"password",type:"password",id:"pwd",onChange:g})]}),u?Object(r.jsx)("div",{children:Object(r.jsx)("p",{className:"error-text",children:"The provided credentials are incorrect"})}):null,Object(r.jsx)("div",{className:"flex-row flex-end",children:Object(r.jsx)("button",{type:"submit",children:"Submit"})})]})]})};var et=function(e){var t=Object(a.useState)({acctType:"",username:"",email:"",password:"",genre:"",bio:"",picture:"",social:"",color:""}),n=Object(d.a)(t,2),c=n[0],s=n[1],i=Object(O.c)(Je),l=Object(d.a)(i,1)[0],j=Object(O.c)(Ve),u=Object(d.a)(j,1)[0],b=function(){var e=Object(_e.a)(Ne.a.mark((function e(t){var n,r;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n="",r="","user"!==c.acctType){e.next=10;break}return e.next=6,l({variables:{username:c.username,email:c.email,password:c.password,bio:c.bio,avatar:c.picture}});case 6:n=e.sent,r=n.data.addUser.token,e.next=15;break;case 10:if("artist"!==c.acctType){e.next=15;break}return e.next=13,u({variables:{artistName:c.username,email:c.email,password:c.password,genre:c.genre,bio:c.bio,avatar:c.picture,socialMedia:c.social}});case 13:n=e.sent,r=n.data.addArtist.token;case 15:Ae.login(r);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(e){var t=e.target,n=t.name,r=t.value;s(Object(H.a)(Object(H.a)({},c),{},Object(Fe.a)({},n,r)))};return Object(r.jsxs)("div",{className:"container my-1",children:[Object(r.jsx)(o.b,{to:"/login",children:"\u2190 Go to Login"}),Object(r.jsx)("h2",{children:"Signup"}),Object(r.jsxs)("form",{onSubmit:b,children:[Object(r.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(r.jsx)("label",{htmlFor:"type",children:"*Account Type:"}),Object(r.jsx)("input",{placeholder:"user or artist",name:"acctType",type:"acctType",id:"type",onChange:h})]}),Object(r.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(r.jsx)("label",{htmlFor:"username",children:"*Username:"}),Object(r.jsx)("input",{placeholder:"Username",name:"username",type:"username",id:"username",onChange:h})]}),Object(r.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(r.jsx)("label",{htmlFor:"email",children:"*Email:"}),Object(r.jsx)("input",{placeholder:"youremail@test.com",name:"email",type:"email",id:"email",onChange:h})]}),Object(r.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(r.jsx)("label",{htmlFor:"pwd",children:"*Password:"}),Object(r.jsx)("input",{placeholder:"******",name:"password",type:"password",id:"pwd",onChange:h})]}),Object(r.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(r.jsx)("label",{htmlFor:"genre",children:"*Genre:"}),Object(r.jsx)("input",{placeholder:"country",name:"genre",type:"genre",id:"genre",onChange:h})]}),Object(r.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(r.jsx)("label",{htmlFor:"bio",children:"About Me:"}),Object(r.jsx)("input",{placeholder:"Tell us about yourself",name:"bio",type:"bio",id:"bio",onChange:h})]}),Object(r.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(r.jsx)("label",{htmlFor:"picture",children:"Picture:"}),Object(r.jsx)("input",{placeholder:"",name:"picture",type:"picture",id:"picture",onChange:h})]}),Object(r.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(r.jsx)("label",{htmlFor:"social",children:"Other Social Media:"}),Object(r.jsx)("input",{placeholder:"LinkedIn, Facebook, Twitter, ect.",name:"social",type:"social",id:"social",onChange:h})]}),Object(r.jsx)("div",{className:"flex-row flex-end",children:Object(r.jsx)("button",{type:"submit",children:"Submit"})})]})]})},tt=n(209),nt=n(104),rt=n(91),at=n.n(rt),ct=n(79),st=n.n(ct),it=n(90),ot=n.n(it),lt=Object(P.a)((function(e){return{root:{display:"flex",padding:"1rem",margin:".5rem"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},cover:{width:151},controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)},playIcon:{height:38,width:38},button:{display:"flex",alignItems:"flex-end"}}})),jt=function(e){var t=be(),n=Object(d.a)(t,2),a=n[0],c=(n[1],a.currentArtist),s=e.title,i=e.description,o=(e.image,e.price),l=e.song_url,j=e.tags;console.log("currentArtist",c),console.log("SongCardArtist",a.currentArtist),console.log("title",s),console.log("description",i);var u=Object(tt.a)(),b=lt();return Object(r.jsx)("div",{children:Object(r.jsxs)(F.a,{className:b.root,children:[Object(r.jsxs)("div",{className:b.details,children:[Object(r.jsxs)(L.a,{className:b.content,children:[Object(r.jsx)(M.a,{component:"h5",variant:"h5",children:s}),Object(r.jsxs)(M.a,{variant:"subtitle1",color:"textSecondary",children:["Title: ",s,Object(r.jsx)("br",{}),"Description: ",i,Object(r.jsx)("br",{}),"Price: ",o,Object(r.jsx)("br",{}),"Song_url: ",l,Object(r.jsx)("br",{}),"Tags: ",j]})]}),Object(r.jsxs)("div",{className:b.controls,children:[Object(r.jsx)(nt.a,{"aria-label":"previous",children:"rtl"===u.direction?Object(r.jsx)(ot.a,{}):Object(r.jsx)(at.a,{})}),Object(r.jsx)(nt.a,{"aria-label":"play/pause",children:Object(r.jsx)(st.a,{className:b.playIcon})}),Object(r.jsx)(nt.a,{"aria-label":"next",children:"rtl"===u.direction?Object(r.jsx)(at.a,{}):Object(r.jsx)(ot.a,{})})]})]}),Object(r.jsx)(B.a,{className:b.cover,image:"../../assets/placeholder-cat.jpg",title:"Live from space album cover"}),Object(r.jsx)(me.a,{className:b.button,children:"buy"})]})})},ut=n(211),dt=n(215),bt=n(214),ht=n(210),Ot=n(212),pt=n(213),gt=n(86),mt=Object(P.a)({table:{minWidth:650}});var xt=function(){var e=be(),t=Object(d.a)(e,2),n=t[0],c=t[1],s=n.currentArtist,i=Object(O.d)(E),o=i.loading,l=i.data;function j(){return n.songs.filter((function(e){return e.artistId===s._id}))}console.log("data",l),Object(a.useEffect)((function(){l?(c({type:K,songs:l.songs}),l.songs.forEach((function(e){pe("songs","put",e)}))):o||pe("songs","get").then((function(e){c({type:K,songs:e})}))}),[l,o,c]),console.log("filterSongs",j()),console.log("currentArtist._id",s._id);var u=n.songs.filter((function(e){return e.artistId===s._id}));console.log("artistSongs",u);var b=mt();function h(){console.log("buy clicked")}function p(){console.log("play clicked")}var g=u.map((function(e){return t=Object(r.jsx)(me.a,{children:Object(r.jsx)(st.a,{onClick:p})}),n=e.title,a=1,c=2,s=Object(r.jsx)(me.a,{onClick:h,children:"Buy"}),{playBtn:t,name:n,album:a,playcount:c,purchase:s};var t,n,a,c,s}));return console.log("rows",g),Object(r.jsxs)("div",{children:[Object(r.jsxs)("h2",{children:[s.artistName,"'s Songs:"]}),Object(r.jsx)(ht.a,{component:gt.a,children:Object(r.jsxs)(ut.a,{className:b.table,"aria-label":"simple table",children:[Object(r.jsx)(Ot.a,{align:"right",children:Object(r.jsxs)(pt.a,{children:[Object(r.jsx)(bt.a,{}),Object(r.jsx)(bt.a,{align:"left",children:"Title"}),Object(r.jsx)(bt.a,{align:"right",children:"Album"}),Object(r.jsx)(bt.a,{align:"right",children:"Playcount"}),Object(r.jsx)(bt.a,{align:"right",children:"Purchase"})]})}),Object(r.jsx)(dt.a,{children:g.map((function(e){return Object(r.jsxs)(pt.a,{children:[Object(r.jsx)(bt.a,{align:"center",children:e.playBtn}),Object(r.jsx)(bt.a,{align:"left",children:e.name}),Object(r.jsx)(bt.a,{align:"right",children:e.album}),Object(r.jsx)(bt.a,{align:"right",children:e.playcount}),Object(r.jsx)(bt.a,{align:"right",children:e.purchase})]},e.name)}))})]})}),u.length?Object(r.jsx)("div",{className:"flex-row",children:j().map((function(e){return Object(r.jsx)(jt,{_id:e._id,title:e.title,artistId:e.artistId,description:e.description,image:e.image,price:e.price,song_url:e.song_url,tags:e.tags},e._id)}))}):Object(r.jsxs)("h3",{children:[s.artistName," hasn't added any songs yet!"]}),o?Object(r.jsx)("img",{src:ye,alt:"loading"}):null]})};var ft=function(){return Object(r.jsxs)("header",{className:"flex-row px-1",children:[Object(r.jsx)("h1",{children:Object(r.jsxs)(o.b,{to:"/",children:[Object(r.jsxs)("div",{id:"bars",children:[Object(r.jsx)("div",{className:"bar"}),Object(r.jsx)("div",{className:"bar"}),Object(r.jsx)("div",{className:"bar"}),Object(r.jsx)("div",{className:"bar"}),Object(r.jsx)("div",{className:"bar"}),Object(r.jsx)("div",{className:"bar"}),Object(r.jsx)("div",{className:"bar"}),Object(r.jsx)("div",{className:"bar"}),Object(r.jsx)("div",{className:"bar"}),Object(r.jsx)("div",{className:"bar"})]}),Object(r.jsxs)("div",{className:"name",children:[Object(r.jsx)("span",{id:"fair",children:"fair"}),Object(r.jsx)("span",{id:"streem",children:"streem"})]})]})}),Object(r.jsx)("nav",{children:Ae.loggedIn()?Object(r.jsxs)("ul",{className:"flex-row",children:[Object(r.jsx)("li",{className:"nav-link",children:Object(r.jsx)(o.b,{to:"/orderHistory",children:"Order History"})}),Object(r.jsx)("li",{className:"nav-link",children:Object(r.jsx)("a",{href:"/",onClick:function(){return Ae.logout()},children:"Logout"})})]}):Object(r.jsxs)("ul",{className:"nav flex-row",children:[Object(r.jsx)("li",{className:"nav-link",children:Object(r.jsx)(o.b,{to:"/signup",children:"Signup"})}),Object(r.jsx)("li",{className:"nav-link",children:Object(r.jsx)(o.b,{to:"/login",children:"Login"})})]})})]})};var vt=function(){var e,t=Object(O.d)(I).data;return t&&(e=t.user),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:"container my-1",children:[Object(r.jsx)(o.b,{to:"/",children:"\u2190 Back to Songs"}),e?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("h2",{children:["Order History for ",e.firstName," ",e.lastName]}),e.orders.map((function(e){return Object(r.jsxs)("div",{className:"my-2",children:[Object(r.jsx)("h3",{children:new Date(parseInt(e.purchaseDate)).toLocaleDateString()}),Object(r.jsx)("div",{className:"flex-row",children:e.songs.map((function(e,t){var n=e._id,a=e.image,c=e.title,s=e.price;return Object(r.jsxs)("div",{className:"card px-1 py-1",children:[Object(r.jsxs)(o.b,{to:"/songs/".concat(n),children:[Object(r.jsx)("img",{alt:c,src:"/images/".concat(a)}),Object(r.jsx)("p",{children:c})]}),Object(r.jsx)("div",{children:Object(r.jsxs)("span",{children:["$",s]})})]},t)}))})]},e._id)}))]}):null]})})};var yt=function(){var e=Object(O.c)(ze),t=Object(d.a)(e,1)[0];return Object(a.useEffect)((function(){function e(){return(e=Object(_e.a)(Ne.a.mark((function e(){var n,r,a,c;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe("cart","get");case 2:if(n=e.sent,r=n.map((function(e){return e._id})),console.log("success songs to saveOrder:",r),!r.length){e.next=13;break}return e.next=8,t({variables:{songs:r}});case 8:a=e.sent,console.log("data",a),c=a.songs,console.log("songData in saveOrder:",c),c.forEach((function(e){pe("cart","delete",e)}));case 13:setTimeout((function(){window.location.assign("/")}),3e3);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),Object(r.jsx)("div",{children:Object(r.jsxs)(Ue,{children:[Object(r.jsx)("h1",{children:"Success!"}),Object(r.jsx)("h2",{children:"Thank you for your purchase!"}),Object(r.jsx)("h2",{children:"You will now be redirected to the homepage"})]})})};function wt(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(0),i=Object(d.a)(s,2),o=i[0],l=i[1],j=function(){var e=Object(_e.a)(Ne.a.mark((function e(t){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{c(""),l(0)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(U.a,{container:!0,component:gt.a,children:[Object(r.jsx)(U.a,{item:!0,xs:12,children:Object(r.jsxs)("p",{className:280===o?"text-error":"",children:["Character Count: ",o,"/280"]})}),Object(r.jsxs)("form",{onSubmit:j,children:[Object(r.jsx)(U.a,{item:!0,xs:12,children:Object(r.jsx)("textarea",{placeholder:"What do you think?",value:n,onChange:function(e){e.target.value.length<=280&&(c(e.target.value),l(e.target.value.length))}})}),Object(r.jsx)(me.a,{type:"submit",children:"Submit"})]})]})}var Nt=n(216),_t=Object(P.a)({root:{},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}});function kt(){var e=_t();e.bullet;return Object(r.jsxs)(F.a,{className:e.root,variant:"outlined",children:[Object(r.jsxs)(L.a,{children:[Object(r.jsx)(M.a,{variant:"h5",component:"h2",children:"(Created at)User says..."}),Object(r.jsxs)(M.a,{variant:"body2",component:"p",children:["I like this artist, rock song #999 is my favorite! I like this artist, rock song #999 is my favorite! I like this artist, rock song #999 is my favorite! I like this artist, rock song #999 is my favorite!",Object(r.jsx)("br",{})]})]}),Object(r.jsx)(Nt.a,{children:Object(r.jsx)(me.a,{size:"small",children:"reply"})})]})}function St(){var e=be(),t=Object(d.a)(e,2),n=t[0],a=(t[1],Ae.getProfile().data._id||null),c=Object(O.c)(Ke),s=Object(O.c)(Xe);function i(){return(i=Object(_e.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c({variables:{artistId:n.currentArtist._id}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function o(){return(o=Object(_e.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s({variables:{userId:a}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return Object(r.jsx)(me.a,{onClick:function(){console.log("CURRENT ARTIST",n.currentArtist),function(){i.apply(this,arguments)}(),function(){o.apply(this,arguments)}()},children:"Like"})}var Tt=function(){var e=be(),t=Object(d.a)(e,2),n=t[0],c=t[1],s=Object(l.f)().artistId,i=Object(O.d)($),o=i.loading,j=i.data,u=n.artists.find((function(e){return e._id===s}));return Object(a.useEffect)((function(){return j&&!u?(c({type:V,artists:j.artists}),j.artists.forEach((function(e){pe("artists","put",e)}))):u?c({type:X,currentArtist:u}):o||pe("artists","get").then((function(e){c({type:V,artists:e})})),function(){c({type:X,currentArtist:{}})}}),[o,u,c,j,s]),Object(r.jsxs)(r.Fragment,{children:[u?Object(r.jsxs)("div",{children:[Object(r.jsx)(U.a,{container:!0,justify:"center",children:Object(r.jsxs)("h1",{children:[u.artistName," ",Object(r.jsxs)("span",{children:[Object(r.jsx)(me.a,{children:"like"}),Object(r.jsx)(St,{})]})," "]})}),Object(r.jsxs)(U.a,{container:!0,justify:"center",spacing:2,children:[Object(r.jsx)(U.a,{item:!0,md:6,children:Object(r.jsx)("img",{alt:"artist",src:u.avatar})}),Object(r.jsx)(U.a,{item:!0,md:6,children:Object(r.jsx)("p",{children:u.bio})})]}),Object(r.jsx)(U.a,{container:!0,children:Object(r.jsx)(xt,{})}),Object(r.jsxs)(U.a,{container:!0,justify:"center",children:[Object(r.jsx)("h1",{children:"COMMENT FEED"}),Object(r.jsx)(wt,{}),Object(r.jsx)(kt,{}),Object(r.jsx)(kt,{})]})]}):null,o?Object(r.jsx)("img",{src:ye,alt:"loading"}):null]})},Et=function(){var e=be(),t=Object(d.a)(e,2),n=t[0],c=t[1],s=Object(l.f)().songId,i=Object(O.d)(E),o=i.loading,j=i.data,u=n.songs.find((function(e){return e._id===s}));return Object(a.useEffect)((function(){return j&&!u?c({type:K,songs:j.songs}):u&&c({type:Z,currentSong:u}),function(){c({type:Z,currentSong:{}})}}),[o,u,c,j]),Object(r.jsx)("main",{children:Object(r.jsx)("div",{className:"m-5",children:u?Object(r.jsx)(jt,Object(H.a)({},u)):Object(r.jsx)("h2",{children:"Loading..."})})})},Ct=new u.a({request:function(e){var t=localStorage.getItem("id_token");e.setContext({headers:{authorization:t?"Bearer ".concat(t):""}})},uri:"/graphql"});var At=function(){return Object(r.jsx)(j.a,{client:Ct,children:Object(r.jsx)(o.a,{children:Object(r.jsx)("div",{children:Object(r.jsxs)(de,{children:[Object(r.jsx)(ft,{}),Object(r.jsxs)(l.c,{children:[Object(r.jsx)(l.a,{exact:!0,path:"/",component:ve}),Object(r.jsx)(l.a,{exact:!0,path:"/login",component:Ze}),Object(r.jsx)(l.a,{exact:!0,path:"/signup",component:et}),Object(r.jsx)(l.a,{exact:!0,path:"/orderHistory",component:vt}),Object(r.jsx)(l.a,{exact:!0,path:"/songs/:id",component:De}),Object(r.jsx)(l.a,{exact:!0,path:"/success",component:yt}),Object(r.jsx)(l.a,{exact:!0,path:"/artists/:artistId",component:Tt}),Object(r.jsx)(l.a,{exact:!0,path:"/artists/:artistName/:artistId/songs/:songId",component:Et}),Object(r.jsx)(l.a,{component:Pe})]})]})})})})},It=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function $t(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(At,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");It?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):$t(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):$t(t,e)}))}}()}},[[177,1,2]]]);
//# sourceMappingURL=main.f95f3b6f.chunk.js.map